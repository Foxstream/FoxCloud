<div class="panel panel-default">      
  <div class="panel-heading">
    <div>{{isNew ? 'Create a new user' : 'Edit user settings'}}</div>
  </div> 
  <div class="panel-body">
    <form name="userForm">
      <div class="form-group">
	<label>Display name: </label>
	<input class="form-control"
	       ng-model="currentUser.name"
	       type="text"
	       name="name"
	       ng-required="{{currentUser !== undefined}}"> 
      </div>
      <div class="form-group">
	<label>Email: </label>
	<input class="form-control"
	       ng-model="currentUser.email"
	       ng-readonly='!isNew'
	       type="email"
	       name="email"
	       ng-required="{{currentUser !== undefined}}"> 
      </div>
      <div class="form-group">
	<label>Enabled</label>
	<input type='checkbox' ng-model="currentUser.enabled" /> 
      </div>
      <div class="form-group">
	<label>Administrator</label>
	<input type='checkbox' ng-model="currentUser.admin" />
      </div>
      <button class='btn btn-primary' ng-disabled="!isDirty() || !userForm.email.$valid"
	      ng-click="submit()">Save</button>
      <button class='btn btn-default'
	      ng-disabled="isNew"
	      ng-really-click="resetPassword()"
	      ng-really-message="Do you really want to reset the password for user {{currentUser.name}} ?">
	<i class="fa fa-recycle"> Reset Password</i></button>      
      <button ng-show="!isDirty()" class='btn btn-default' ng-click="close()">Cancel</button>
      <button ng-show="isDirty()"
	      class='btn btn-warning'
	      ng-really-click="close()"
	      ng-really-message="Do you really want to cancel your changes ?">Cancel</button>
    </form>
  </div>    
</div> 
